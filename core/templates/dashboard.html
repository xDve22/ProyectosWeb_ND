{% extends "base.html" %}
{% block title %}Job Offers{% endblock %}
{% load time_filters %}

{% block content %}
<main>
  {% include "_job_filters.html" %}
  
  <ul>
    {% for job in jobs %}
    <li>
      <h2><a href="{% url 'job_detail' job.pk %}">{{ job.title }}</a></h2>
      <p><strong>Company:</strong> {{ job.company.name }}</p>
      <p><strong>Type:</strong> {{ job.get_employment_type_display }}</p>
      <p><strong>Location:</strong> {{ job.location }}</p>
      <p><strong>Posted:</strong> {{ job.created_at|short_timesince }}</p>
    </li>
    {% empty %}
    <li>No job offers available.</li>
    {% endfor %}
  </ul>

  {% if has_next %}
    <form method="get">
      {% for key, value in request.GET.items %}
        {% if key != 'page' %}
          <input type="hidden" name="{{ key }}" value="{{ value }}">
        {% endif %}
      {% endfor %}
      <input type="hidden" name="page" value="{{ page|add:1 }}">
      <button type="submit">Load more</button>
    </form>
  {% endif %}
</main>
{% endblock %}
